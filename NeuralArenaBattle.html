<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Architect: The Grand Tour</title>
    <!-- Link to the CSS file in the correct directory -->
    <link rel="stylesheet" href="css/NeuralArena.css">
    <style>
        /* Add some basic styling for code elements */
        code {
            background-color: var(--bg-medium);
            border: 1px solid var(--border);
            padding: 2px 5px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        .code-class { color: var(--accent-blue); font-weight: bold; }
        .code-function { color: var(--accent-yellow); }
        .code-variable { color: var(--accent-green); }
        .code-number { color: #f97583; } /* A pinkish color for numbers */
        .goal { margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>
    <div id="game-container">
        <header id="main-header">
            <div class="header-left">
                <h1 class="game-title">Neural Architect üß†</h1>
            </div>
            <div id="player-stats" class="header-right">
                <div class="stat-box">üí° Insight: <span id="insight-stat">100</span></div>
                <div class="stat-box">Credits: <span id="credits-stat">10000</span></div>
                <div class="stat-box">Player Level: <span id="player-level-stat">1</span></div>
                <div class="xp-bar-container">
                    <div id="xp-bar">
                         <div id="xp-bar-fill"></div>
                    </div>
                    <div class="xp-text">XP: <span id="xp-stat">0</span> / <span id="xp-next-stat">100</span></div>
                </div>
                <button id="debug-toggle" style="background: var(--accent-red); color: white; border: none; border-radius: 6px; padding: 6px 12px; cursor: pointer; font-size: 0.8rem; margin-left: 20px;">
                    Debug Mode: OFF
                </button>
            </div>
        </header>

        <main id="main-content">
            <!-- World Map Screen -->
            <div id="world-map-screen" class="game-screen active-screen">
                <!-- Content generated by JavaScript -->
            </div>

            <!-- Level Screen -->
            <div id="level-screen" class="game-screen">
                <button id="back-to-map-btn" class="back-button">‚Üê World Map</button>
                <div class="level-container">
                    <div id="instructions-panel" class="panel">
                        <div class="panel-header">
                            <h2>CHALLENGE <span id="level-title">1</span></h2>
                            <button id="hint-button" class="hint-button">üí° Hint (-<span id="hint-cost">50</span>)</button>
                        </div>
                        <div id="instructions-content">
                            <!-- Instructions loaded by JS -->
                        </div>
                    </div>
                    <div id="code-panel" class="panel">
                        <h2 class="panel-title">Complete the Code:</h2>
                        <div class="code-editor">
                            <pre><code id="code-block"><!-- Code loaded by JS --></code></pre>
                        </div>
                        <button id="run-button" class="run-button">Run Code</button>
                    </div>
                    <div id="vis-panel" class="panel">
                        <h2 class="panel-title">Your CNN Architecture</h2>
                        <div id="vis-container">
                            <!-- Visualizations added by JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Garden Screen -->
            <div id="data-garden-screen" class="game-screen">
                <h1 class="screen-title">üå± The Data Garden</h1>
                <p class="screen-subtitle">Cultivate your datasets and brew augmentation potions.</p>
                
                <div id="memory-rig-panel">
                    <div class="rig-header">
                        <h3>Training Rig Memory</h3>
                        <div id="crystal-slot" class="slot-empty">
                            üíé Memory Crystal: EMPTY
                        </div>
                    </div>
                    <div class="memory-bar-container">
                        <div id="memory-bar-fill"></div>
                    </div>
                    <div id="memory-bar-text">0% Used / 100% Capacity</div>
                </div>

                <div class="garden-layout">
                    <div id="dataset-plots" class="plots-container">
                        <!-- Datasets loaded by JS -->
                    </div>
                    <div id="potions-shed" class="potions-container">
                        <h2 class="potions-title">Potion Brewery</h2>
                        <!-- Potions loaded by JS -->
                    </div>
                </div>
            </div>

            <!-- Shop Screen -->
            <div id="shop-screen" class="game-screen">
                <h1 class="screen-title">üõí Store</h1>
                <p class="screen-subtitle">Spend your Compute Credits on powerful upgrades.</p>
                
                <div class="store-layout">
                    <div class="store-section">
                        <h2 class="section-title">Pre-Trained Models</h2>
                        <div id="shop-items" class="shop-container">
                            <!-- Shop items loaded by JS -->
                        </div>
                    </div>
                    <div class="store-section">
                        <h2 class="section-title">Project Blueprints</h2>
                        <div id="project-items" class="project-container">
                            <!-- Project items loaded by JS -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- NAS Lab Screen -->
            <div id="nas-screen" class="game-screen">
                <h1 class="screen-title">üß† NAS Lab</h1>
                <p class="screen-subtitle">Use Compute Credits to automatically evolve a new architecture.</p>
                <div class="nas-layout">
                    <div class="nas-panel nas-controls">
                        <h2>Evolution Preferences</h2>
                        <div class="slider-container">
                            <label for="nas-accuracy">Accuracy: <span id="nas-accuracy-val">50</span>%</label>
                            <input type="range" id="nas-accuracy" class="nas-slider" min="0" max="100" value="50">
                        </div>
                        <div class="slider-container">
                            <label for="nas-speed">Speed: <span id="nas-speed-val">30</span>%</label>
                            <input type="range" id="nas-speed" class="nas-slider" min="0" max="100" value="30">
                        </div>
                        <div class="slider-container">
                            <label for="nas-efficiency">Efficiency (Size): <span id="nas-efficiency-val">20</span>%</label>
                            <input type="range" id="nas-efficiency" class="nas-slider" min="0" max="100" value="20">
                        </div>
                        
                        <div class="nas-cost">
                            <strong>Estimated Cost:</strong> <span id="nas-cost-display">10000 CC</span>
                        </div>
                        
                        <button id="start-nas-button" class="nas-button">Start Evolution</button>
                    </div>
                    <div class="nas-results">
                        <div class="nas-panel">
                            <h2>Evolution Progress</h2>
                            <div id="nas-progress" class="nas-progress">
                                <div class="progress-bar">
                                    <div id="nas-progress-fill" class="progress-fill"></div>
                                </div>
                                <div id="nas-status">Ready to evolve...</div>
                            </div>
                            <div id="nas-results-display" class="nas-results-display">
                                <!-- NAS results loaded by JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MNIST Lab Screen (Reverted to Canvas) -->
            <div id="mnist-lab-screen" class="game-screen">
                <h1 class="screen-title">‚úèÔ∏è MNIST Lab</h1>
                <p class="screen-subtitle">Draw a digit and see if the pre-trained model can recognize it!</p>
                <div class="mnist-lab-layout">
                    <div class="mnist-panel">
                        <h2>Prediction</h2>
                        <!-- CORRECTED ID -->
                        <div id="mnist-result-display">?</div>
                        <div id="mnist-confidence">Draw a digit (0-9)</div>
                    </div>
                    <div class="mnist-panel">
                        <h2>Draw Your Digit</h2>
                        <!-- Canvas for drawing -->
                        <canvas id="mnist-canvas" width="280" height="280"></canvas>
                        <div class="mnist-controls">
                            <button id="clear-canvas-btn">Clear</button>
                            <button id="predict-digit-btn">Predict</button>
                        </div>
                    </div>
                </div>
            </div>


        </main>

        <footer id="main-footer">
            <button class="nav-button active" data-screen="world-map-screen">üåê World Map</button>
            <button class="nav-button" data-screen="data-garden-screen">üå± Data Garden</button>
            <button class="nav-button" data-screen="shop-screen">üõí Store</button>
            <button class="nav-button" data-screen="nas-screen">üß† NAS Lab</button>
            <!-- Added MNIST Lab Navigation Button -->
            <button class="nav-button" data-screen="mnist-lab-screen">‚úèÔ∏è MNIST Lab</button>
        </footer>

        <!-- Notification Area -->
        <div id="notification"></div>
        
        <!-- Training Result Modal -->
        <div id="training-result-modal">
            <div class="modal-content">
                <span id="modal-close-btn">&times;</span>
                <h2>Training Complete!</h2>
                <div class="result-line">
                    <strong>Model:</strong>
                    <span id="result-model-name"></span>
                </div>
                <div class="result-line">
                    <strong>Dataset:</strong>
                    <span id="result-dataset-name"></span>
                </div>
                <div class="result-line">
                    <strong>Time Taken:</strong>
                    <span id="result-time"></span>
                </div>
                <div class="result-line accuracy">
                    <strong>Accuracy:</strong>
                    <span id="result-accuracy"></span>
                </div>
            </div>
        </div>

    </div> 
    <!-- Link to the JS file in the correct directory -->
    <script src="Javascript/NeuralArena.js"></script>
</body>
</html>